---
title: 디비는 왜 빠를까
description: 마쯔노부 요시노리, 『데이터베이스를 지탱하는 기술』을 읽고
date: 2018-09-25
tags:
  - development
  - database
  - backend
  - book
created_at: 2018-09-25
modified_at: 2025-12-28
---

대량의 데이터에서 특정 사용자를 찾는 가장 빠른 방법은 무엇일까. 

책 뒤의 색인 페이지처럼 키워드와 위치 정보를 짝지어 관리하는 것이 **인덱스**다. 인덱스 테이블은 고정된 공간을 사용해 데이터 양에 상관없이 빠르게 접근할 수 있다. 실제 데이터베이스는 키 값을 해시 함수에 넣어 관리하는 **해시 인덱스**를 사용한다. O(1)의 속도로 빠르지만 범위 검색이나 정렬에는 부적합하다.

## B+ Tree 인덱스
범위 검색과 정렬을 위해 **B+ Tree** 구조를 쓴다. 루트, 브랜치, 리프 블록으로 구성된 다분기 트리다. 
- O(logN)의 시간 복잡도로 매우 빠르다. 
- 리프 블록이 연결되어 있어 범위 스캔이 용이하다. 
- RDBMS의 표준으로 자리 잡았다.

## 특징과 관리
- **고유성 보장:** 중복 체크 비용이 적다.
- **멀티 컬럼 인덱스:** 여러 컬럼을 묶어 AND 검색을 가속한다.
- **인덱스 병합:** 각기 다른 인덱스 결과를 집합 연산으로 처리한다.

업데이트 시에는 인덱스도 갱신해야 하므로 비용이 발생한다. Mysql은 메모리에 임시 기록 후 모아서 갱신하거나 파티션 테이블로 동시성을 높여 이 문제를 해결한다. 인덱스는 만능이 아니다. 잘 모른 채 남용하는 것은 오버엔지니어링이다. 기술의 원리를 알고 적절하게 사용하는 균형이 중요하다.
